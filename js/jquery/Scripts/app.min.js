function Accordion(){var a={dt:$(".accordion dt"),dd:$(".accordion dd")};this.initialise=function(){a.dd.first().addClass("active"),a.dt.first().addClass("active"),a.dt.click(function(){var b=$(this);return b.hasClass("active")?b.removeClass("active").next().slideUp():(a.dt.removeClass("active"),b.addClass("active"),a.dd.slideUp(),b.next().slideDown()),!1})}}function PostcodeLookup(){this.initialise=function(a){function b(){var a=$(".js-country-select option:selected").val(),b=$(".postcode-lookup-container");"United Kingdom"===a?b.css("display","block"):b.css("display","none")}var c=$(".js-country-select");$("#postcode_lookup").getAddress({api_key:a,output_fields:{line_1:"#Address",line_2:"#Address2",line_3:"#Address3",post_town:"#Town",county:"#County",postcode:"#PostCode"}}),b(),c.change(function(){b()})}}function Browser(){this.initialise=function(){if(void 0!==navigator&&void 0!==navigator.userAgent&&(user_agent=navigator.userAgent.toLowerCase(),user_agent.indexOf("android")>-1)){var a=$(".android-banner"),b="js-show",c="close_banner";$("html").addClass("android"),a.addClass(b),$(".android-banner__close").on("click touchStart",function(){a.removeClass(b),Cookies(c,"true")});var d=0;$(".android-banner__link").on("click touchStart",function(){3===(d+=1)&&(a.removeClass(b),Cookies(c,"true"))}),Cookies.set(c)&&a.hide()}/Edge/.test(navigator.userAgent)&&$("html").addClass("edge")}}function CookieBanner(){var a=$(".js-cookie-banner"),b=$("body");this.initialise=function(){function c(a,b,c){var d=new Date;c?(d.setTime(d.getTime()+24*c*60*60*1e3),document.cookie=a+"="+b+";expires="+d.toUTCString()):document.cookie=a+"="+b+";expires=Fri, 30 Dec 9999 23:59:59 GMT;"}function d(a){var b={},c=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!((d=(g=h.next()).done)||(c.push(g.value),b&&c.length===b));d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h.return&&h.return()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),b={};return document.cookie.split(";").forEach(function(a){var d=a.split("="),e=c(d,2),f=e[0],g=e[1];b[f.trim()]=g}),b[a]}d("18+")?(a.removeClass("active"),a.removeClass("is-fixed")):(a.addClass("active"),a.addClass("is-fixed"),setTimeout(function(){b.css("padding-top",a.height()+"px")},500)),$(".js-cookie-btn").on("click",function(d){$(this).data("cookie")?(c("18+",1,30),a.removeClass("active")):(b.animate({"padding-top":0},800),a.removeClass("active"),c("18+",0,30))})}}function CustomScroller(a){"use strict";function b(){d.container.mCustomScrollbar({axis:"x",scrollbarPosition:"outside",scrollButtons:{enable:!0,scrollType:"stepped",scrollAmount:320},keyboard:{scrollType:"stepped"},autoDraggerLength:!1,mouseWheel:!1,autoExpandScrollbar:0,alwaysShowScrollbar:2,scrollInertia:400,advanced:{autoExpandHorizontalScroll:!0},callbacks:{onInit:function(){d.prevBtn=$(".mCSB_buttonLeft"),d.nextBtn=$(".mCSB_buttonRight"),d.prevBtn.addClass("is-hidden")},onTotalScroll:function(){d.nextBtn.addClass("is-hidden")},onTotalScrollOffset:120,onTotalScrollBack:function(){d.prevBtn.addClass("is-hidden")},onTotalScrollBackOffset:120,onScrollStart:function(){d.prevBtn.removeClass("is-hidden"),d.nextBtn.removeClass("is-hidden")}}})}function c(){d.container.mCustomScrollbar({axis:"x",scrollbarPosition:"outside",scrollButtons:{enable:!1},autoDraggerLength:!1,mouseWheel:!1,autoExpandScrollbar:0,alwaysShowScrollbar:2,scrollInertia:300,advanced:{autoExpandHorizontalScroll:!0}})}var d={container:$(a),prevBtn:null,nextBtn:null};this.initialise=function(){Modernizr.touch?c():b()}}function DisablePasting(){"use strict";function a(){b.target.each(function(){$(this).bind("paste",function(a){alert("Pasting into this field is disabled, please re-enter."),a.preventDefault()})})}var b={target:$(".js-disable-paste")};this.init=function(){a()}}function Equalheight(){function a(){var a=0,c=0,d=[],e=0;b.equal.each(function(){if($el=$(this),$($el).height("auto"),e=$el.position().top,c!=e){for(currentDiv=0;currentDiv<d.length;currentDiv++)d[currentDiv].height(a);d.length=0,c=e,a=$el.height(),d.push($el)}else d.push($el),a=a<$el.height()?$el.height():a;for(currentDiv=0;currentDiv<d.length;currentDiv++)d[currentDiv].height(a)})}var b={equal:$(".equal")};this.initialise=function(){window.onload=function(){a()},window.onresize=function(){a()}}}function fixedHeader(){this.initialise=function(){var a=$(window).width(),b=$(".site-header__bottom"),c=$(".site-header__top"),d=$(window).scrollTop(),e=function(){b.removeClass("js-header-fixed"),c.removeClass("js-top-fixed")},f=function(){b.addClass("js-header-fixed")},g=function(){c.addClass("js-top-fixed")};a>980&&b.is(":visible")&&$(window).scroll(function(){var a=$(window).scrollTop();a<=86?e():a>=b.offset().top&&(f(),$(window).scrollTop()<d&&g()),d=a})};var a=$(window).width(),b=$("body, html"),c=$("#content_0_plReport, #plReport");c.length>0&&a>769?b.animate({scrollTop:c.offset().top-250},"slow"):c.length>0&&a<769&&b.animate({scrollTop:c.offset().top-50},"slow")}function Gallery(){this.initialise=function(){$(".popup-gallery").each(function(){$(this).magnificPopup({delegate:"a",type:"image",removalDelay:300,mainClass:"mfp-fade",tLoading:"Loading image #%curr%...",gallery:{enabled:!0,navigateByImgClick:!1,preload:[0,1]},image:{tError:'<a href="%url%">The image #%curr%</a> could not be loaded.',titleSrc:function(a){return a.el.hasClass("starting-XI-image")?'<div class="gallery-details"> <span class="gallery-title">'+a.el.attr("data-title")+'</span> </div><div class="gallery-meta"> <div class="gallery-social"> <a class="btn social-icon--white icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u='+a.el.attr("data-share-url")+'"> </a> <a class="btn social-icon--white icon-twitter" href="https://twitter.com/home?status='+a.el.attr("data-share-url")+'"> </a> <a class="btn social-icon--white icon-linkedin" href="https://www.linkedin.com/shareArticle?&url='+a.el.attr("data-share-url")+'"> </a> </div></div>':'<div class="gallery-details"> <div class="gallery-sponsor"><span class="gallery-sponsor-text">'+(void 0!==a.el.attr("data-sponsor-title")?a.el.attr("data-sponsor-title"):"")+'</span><img alt="'+a.el.attr("data-title")+'" class="gallery-sponsor-image" src="'+a.el.attr("data-sponsor")+'"></div><span class="gallery-title">'+a.el.attr("data-title")+'</span><span class="gallery-caption">'+a.el.attr("data-caption")+'</span></div><div class="gallery-meta"> <div class="gallery-social"> <a class="btn social-icon--white icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u='+a.el.attr("data-share-url")+'"></a> <a class="btn social-icon--white icon-twitter" href="https://twitter.com/home?status='+a.el.attr("data-share-url")+'"></a> <a class="btn social-icon--white icon-linkedin" href="https://www.linkedin.com/shareArticle?&url='+a.el.attr("data-share-url")+'"></a></div><div class="gallery-link"> <a class="gallery-link-btn" href="'+a.el.attr("data-buy-url")+'">Buy this picture</a> </div></div>'}},callbacks:{buildControls:function(){void 0!==this.arrowRight&&null!==this.arrowRight&&this.arrowLeft.appendTo(this.contentContainer),void 0!==this.arrowLeft&&null!==this.arrowLeft&&this.arrowRight.appendTo(this.contentContainer)},markupParse:function(a,b,c){a.addClass("gallery-popup-wrapper")}}})})}}function deviceDetection(){function a(){var a=/ipad/i.test(navigator.userAgent.toLowerCase()),b=/iphone/i.test(navigator.userAgent.toLowerCase()),c=/ipod/i.test(navigator.userAgent.toLowerCase()),d=/android/i.test(navigator.userAgent.toLowerCase()),e=$(".kaltura-video-container.kaltura-video"),f=$(".live-streaming-container.live-video"),g="<div class='mobile-alert'><div><p>Due to EFL broadcasting regulations we cannot show video streams on mobile or tablet browsers. These devices are only supported via the Official Aston Villa Club App.</p> <p>To download the Official Aston Villa Club App please click on one of the options below - then link your App to your avfc.co.uk account to view live video & audio streams (regional restrictions may apply).</p> <a class='btn btn--primary btn--ios-download' href='https://itunes.apple.com/gb/app/aston-villa-fc/id1139256337?mt=8'>Aston Villa FC iOS App</a><a class='btn btn--primary btn--android-download' href='https://play.google.com/store/apps/details?id=com.incrowdsports.football.villa&hl=en_GB'>Aston Villa FC Android App</a></div></div>";b||a||c?(e.remove(),f.html(g)):d&&(e.remove(),f.html(g))}this.init=function(){a()}}function languageSelector(){function a(){$("#lang-switcher").on("click touchStart",function(){$(this).toggleClass("active")})}this.init=function(){a()}}function Popup(){"use strict";function a(){b.button.magnificPopup({type:"inline",prependTo:document.body.getElementsByTagName("form"),midClick:!0})}var b={button:$(".js-login-popup")};this.init=function(){a()}}function AccountList(){"use strict";function a(){b.button.on("click",function(){b.button.toggleClass("is-active"),b.list.toggleClass("is-active")}),$(document).on("click",function(a){$(a.target).closest(b.button).length||$(a.target).closest(b.list).length||(b.button.removeClass("is-active"),b.list.removeClass("is-active"))}),$(document).on("click",".mfp-close",function(){$(".mfp-bg, .mfp-wrap").hide()})}var b={button:$(".js-account-button"),list:$(".js-account-list")};this.init=function(){a()}}function MarginBanners(){function a(){d.totalWidth=c.container.outerWidth()+20,c.image.each(function(){d.totalWidth+=$(this).outerWidth(!0)})}function b(){d.pageWidth=$("body").outerWidth(),d.pageWidth<d.totalWidth?c.container.hide():c.container.show()}var c={image:$(".page-margin-banners img"),container:$(".page-margin-banners__inner")},d={totalWidth:0,pageWidth:0};this.initialise=function(){window.onload=function(){a(),b()},window.onresize=function(){b()}}}function matchCentreTabs(){this.initialise=function(){$(".mc-parent-tabs__options--tab").click(function(){var a=$(this),b=$(this).attr("data-tab");$(".mc-parent-tabs__options--tab").removeClass("js-mc-tab-active"),$(".mc-tab-content").removeClass("js-show-mc-content"),a.addClass("js-mc-tab-active"),$("#"+b).addClass("js-show-mc-content")})}}function MegaMenu(){this.initialise=function(){$(".site-nav__item-link").on({mouseenter:function(){var a=$(this),b=$("#"+a.attr("data-nav-item")),c=$(".drop-down");if(a.attr("data-nav-item")&&!a.hasClass("drop-list__item-link")){a.addClass("js-active"),c.addClass("js-active"),b.addClass("js-active");var d=b.outerHeight(!0);$(".drop-down.js-active, .drop-down.js-active .drop-down__inner").css({height:d})}},mouseleave:function(){setTimeout(function(){var a=$(".site-nav__item-link.active:hover").length;$(".drop-down:hover").length||a||($(".drop-down").removeClass("js-active"),$(".drop-down__content").removeClass("js-active"),$(".site-nav__item-link").removeClass("js-active"))},1)}}),$(".drop-down").on({mouseleave:function(){$(".drop-down").removeClass("js-active"),$(".drop-down__content").removeClass("js-active"),$(".site-nav__item-link").removeClass("js-active")}})}}function fixNav(){window.scrollY>=topOfNav?document.body.classList.add("fixed-nav"):document.body.classList.remove("fixed-nav")}function MainNav(){"use strict";function a(){f.moreList.find("a").on("focus",function(a){f.moreBtn.addClass("is-active"),f.moreList.find("a").on("blur",function(a){f.moreList.find("a:focus").length?f.moreBtn.addClass("is-active"):f.moreBtn.removeClass("is-active")})})}function b(){g.totalWidth=f.exclude.outerWidth(!0)+20,g.navWidth=f.navList.outerWidth(),f.navItem.each(function(){var a=$(this).outerWidth(!0);g.totalWidth=g.totalWidth+a,g.navWidth<g.totalWidth&&f.navItem.last().prependTo(f.moreList).addClass("js-more-item drop-list__item").removeClass("site-nav__item js-nav-item").find(".site-nav__item-link").addClass("drop-list__item-link"),f.navItem=$(".js-nav-item")}),g.moreItem=$(".js-more-item"),g.freeSpace=g.navWidth-g.totalWidth,g.reqSpace=g.moreItem.first().width()+40,g.freeSpace>g.reqSpace&&(g.moreItem.first().insertBefore(f.exclude).removeClass("js-more-item drop-list__item").addClass("site-nav__item js-nav-item").find(".drop-list__item-link").removeClass("drop-list__item-link"),f.navItem=$(".js-nav-item")),$(".site-nav").removeClass("is-hidden")}function c(){f.moreList.find("li").appendTo(f.navList).removeClass("js-more-item drop-list__item").addClass("site-nav__item js-nav-item").find(".drop-list__item-link").removeClass("drop-list__item-link").addClass("site-nav__item-link"),$(".site-nav").removeClass("is-hidden")}function d(){$(".site-header__scroll-container").css("opacity",1),f.scroller.each(function(){var a,b=$(this),c=b.find(f.currentItem),d=b.find(".site-header__scroll-container");c.length&&(g.bodyWidth=$("body").width(),g.currentOffset=c.offset(),a=g.currentOffset.left,g.scrollBy=a-g.bodyWidth/2+c.outerWidth()/2,d.animate({scrollLeft:g.scrollBy},800))})}function e(){f.scroller.each(function(){function a(){g.bodyWidth=$("body").width(),g.bodyWidth<c.find(".js-scroll-overflow").outerWidth()&&c.addClass("is-scrollable")}function b(){d?$(".is-scrollable").removeClass("is-scrollable"):(a(),setTimeout(function(){c.on("touchmove",function(){c.removeClass("is-scrollable"),Cookies.set("disableScrollHinting",!0)})},1200))}var c=$(this),d=Cookies.get("disableScrollHinting");b(),$(window).resize(function(){b()})})}var f={moreBtn:$(".js-more-link"),moreList:$(".js-more-list"),navList:$(".js-nav-list"),navItem:$(".js-nav-item"),exclude:$(".js-nav-exclude"),scroller:$(".scroll-hint"),currentItem:$('[class*="current"]')},g={totalWidth:0,navWidth:0,freeSpace:0,moreItem:null,reqSpace:null,currentOffset:0,scrollby:0,bodyWidth:0};this.initDefault=function(){$(window).on("load resize orientationchange",null,function(){b(),a()})},this.initTouch=function(){c(),d(),e()}}function playerTabs(){this.initialise=function(){var a=$(".js-player-tab-active"),b=$("#"+a.attr("data-tab")).outerHeight(!0);$(".player-list-contain, .player-list-contain__inner").css({height:b}),$(".player-tabs__options--tab").click(function(){var a=$(this).attr("data-tab"),b=$(this);$(".player-tabs__options--tab").removeClass("js-player-tab-active"),$(".player-list-block").removeClass("js-show-player-block"),b.addClass("js-player-tab-active"),$("#"+a).addClass("js-show-player-block");var c=$("#"+b.attr("data-tab")).outerHeight(!0);$(".player-list-contain, .player-list-contain__inner").css({height:c})})}}function Search(){this.initialise=function(){function a(){f.fadeIn(500),c.removeClass("icon-search").addClass("icon-cancel"),e.removeClass("scroll-hint"),d.addClass("js-hide-nav"),g.addClass("js-reveal-search"),setTimeout(function(){g.focus()},1e3)}function b(){f.hide(),e.addClass("scroll-hint"),c.addClass("icon-search").removeClass("icon-cancel"),d.removeClass("js-hide-nav"),g.removeClass("js-reveal-search")}var c=$("#js-search-toggle"),d=$("#js-main-nav"),e=$(".site-nav"),f=$("#js-search-contain"),g=$("#js-site-search");c.on("click touchstart",function(c){d.hasClass("js-hide-nav")?b():a(),c.preventDefault(),c.stopPropagation()}),g.keypress(function(a){return 13!==a.which||(window.location="/search?q="+a.target.value,a.preventDefault(),a.stopPropagation(),!1)}),$(window).on("click touchstart",function(a){0!==f.has(a.target).length||f.is(a.target)||b()})}}function animatedStats(){function a(){e.is(":visible")?c.scrollTop()>200&&(setTimeout(function(){$(".stats-tabs__option-total--hidden").hide()},100),c.off("scroll",a),d.each(function(){var a=$(this);a.hasClass("stats")||a.prop("Counter",0).animate({Counter:a.text()},{duration:3e3,easing:"swing",step:function(b){a.text(Math.ceil(b))}})})):0===e.length&&(c.off("scroll",a),setTimeout(function(){$(".stats-tabs__option-total--hidden").hide(),d.each(function(){var a=$(this);a.hasClass("stats")||a.prop("Counter",0).animate({Counter:a.text()},{duration:3e3,easing:"swing",step:function(b){a.text(Math.ceil(b))}})})},100))}function b(){d.each(function(){parseInt($(this).text())>=99&&$(".stats-tabs__option-total").addClass("js-reduce-font")})}var c=$(window),d=$(".stats-tabs__option-total"),e=$(".player-header");c.scroll(a),this.init=function(){a(),b()}}function Carousel(){function a(){function a(){var a=$(".slick-carousel-fixtures .fixture-carousel__fixture").length,b=$(".slick-carousel-fixtures-slide.slick-active").length,c=4-b;return a<=4?c:a>6?c+3:a-4+c}var b=540;initSlick=function(){$(".slick-carousel").slick({responsive:[{breakpoint:9999,settings:"unslick"},{breakpoint:b,settings:{dots:!0}}]})},initSlick(),$(window).on("resize",function(){$(window).width()<b&&initSlick()}),$(".slick-carousel-news").slick({responsive:[{breakpoint:9999,settings:"unslick"},{breakpoint:600,settings:{dots:!0}}]}),$(".slick-carousel-fixtures").slick({infinite:!1,slidesToShow:4,slidesToScroll:1,responsive:[{breakpoint:1160,settings:{slidesToShow:3,focusOffset:1}},{breakpoint:840,settings:{slidesToShow:2}},{breakpoint:480,settings:{slidesToShow:1}}]}).slick("slickGoTo",a()),$(".slick-carousel-hero").slick({autoplaySpeed:7750,fade:!0,dots:!1,arrows:!1,slidesToShow:1,slidesToScroll:1,swipe:!1,adaptiveHeight:!0,autoplay:!0}),$(".slick-navigation-hero").slick({slidesToShow:4,slidesToScroll:4,infinite:!1,dots:!1,arrows:!1,focusOnSelect:!0,asNavFor:".slick-carousel-hero",swipe:!1}),$(".slick-carousel-hero").on("afterChange",function(a,b,c){$(".slick-navigation-hero .slick-slide").removeClass("slick-current"),$(".slick-navigation-hero .slick-slide").eq(c).addClass("slick-current")}),$(".slick-navigation-hero .slick-slide").on("click touchStart",function(){$(".slick-carousel-hero").slick("slickPause"),$(".slick-carousel-hero").addClass("paused")}),$(".slick-navigation-hero").length&&$(window).scroll(function(){var a=$(window).scrollTop(),b=$(".slick-carousel-hero"),c=$(".slick-navigation-hero");a>c.offset().top+(c.height()-15)?(b.slick("slickPause"),b.addClass("paused")):(b.slick("slickPlay"),b.removeClass("paused"))}),$(".slick-navigation-hero .slick-slide").eq(0).addClass("slick-current"),$(".slick-carousel-widget").slick({dots:!0,infinite:!1,slidesToShow:1,slidesToScroll:1})}this.init=function(){a()}}function Splash(){this.initialise=function(){var a=$("#splash-popup"),b=$("#splash-button"),c=a.attr("data-id").replace(/[{}]/g,"");!Cookies.set("splashId_"+c)&&a.length&&($.magnificPopup.open({type:"inline",removalDelay:300,mainClass:"mfp-fade",items:{src:a},callbacks:{open:function(){$("body").css("overflow","hidden").scrollTop(0)},close:function(){$("body").css("overflow","visible")}}},0),a.show(),b.on("click",function(){$.magnificPopup.close()}),Cookies.set("splashId_"+c,"viewed"))}}function tabController(){function a(){c.tabLink.on("click",function(){var a=$(this),b=a.closest(".tab-pane"),c=a.attr("data-tab");b.find(".tab-pane__list-link").removeClass("is-current"),b.find(".tab-pane__content-part").removeClass("is-current"),a.addClass("is-current"),b.find("#"+c).addClass("is-current")})}function b(){var a=window.location.href,b=a.substr(a.lastIndexOf("/")+1),c=$(".account-parent-tabs__options li"),d=$(".account-parent-tabs__options li:nth-child(2)"),e=$(".account-parent-tabs__options li:nth-child(3)"),f="chairman-tab-active",g="chairman-tab-disabled";"Club"===b?(c.addClass(g),d.removeClass(g).addClass(f)):"Toolbox"===b&&(c.removeClass(g),e.removeClass(g).addClass(f))}var c={tabLink:$(".tab-pane__list-link"),tabs:$(".tab-pane__list"),tabWrapper:$(".tab-pane__content")};this.init=function(){a(),b()}}function Validation(){"use strict";function a(){b.confirmedInput.each(function(){c.source=$(this),c.label=c.source.prev("label").text(),c.target=c.source.data("confirm"),b.confirmation=$("[name='"+c.target+"']"),$('<span class="error" style="display:none;">*'+c.label+" must match</span>").insertAfter(b.confirmation)}),b.confirmedInput.on("change",function(){c.source=$(this),c.sourceValue=c.source.val(),c.target=c.source.data("confirm"),b.confirmation=$("[name='"+c.target+"']"),b.confirmation.on("keyup, change, blur",function(){c.target=$(this),c.targetValue=c.target.val(),c.targetValue!==c.sourceValue?(c.target.addClass("form-error"),c.target.next(".error").css("display","block")):(c.target.removeClass("form-error"),c.target.next(".error").css("display","none"))})})}var b={confirmedInput:$("[data-confirm]"),confirmation:null},c={target:null,source:null,sourceValue:"",targetValue:"",label:""};this.init=function(){a()}}function videoDetect(){this.initialise=function(){var a=$(".offset-video"),b=function(){a.addClass("js-standard-video")};a.last()&&b()}}function createFunctionWithTimeout(a,b){function c(){d||(d=!0,a())}var d=!1;return setTimeout(c,b||1e3),c}var accordion=new Accordion;accordion.initialise();var articles={settings:{isSafari:-1!==navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome"),navigation:{selectors:{next:"article-nav__link--next",previous:"article-nav__link--previous"}}},navigation:function(){var a=$("."+this.settings.navigation.selectors.next),b=$("."+this.settings.navigation.selectors.previous);a.addClass("safari-fix"),b.addClass("safari-fix")},detectNavigationHeight:function(){$(".article-nav").each(function(){var a=0,b=$(".article-nav__link",this);b.each(function(){var b=$(this);b.outerHeight()>a&&(a=b.outerHeight())}),b.css("height",a)})}};$(function(){articles.navigation(),articles.detectNavigationHeight()});var browserDetect=new Browser;browserDetect.initialise(),function(a,b,c){a(".small-pie-chart").each(function(){a(this).attr("data-chart-percentage")})}(jQuery);var cookieBanner=new CookieBanner;cookieBanner.initialise();var videoScroller=new CustomScroller(".video-listing__scroll-container");videoScroller.initialise(),function(){var a=$(".js-value");a.each(function(){parseInt($(this).text())>=99&&a.addClass("js-reduce-font")})}();var disable=new DisablePasting;disable.init();var equalMe=new Equalheight;equalMe.initialise(),function(){$(".faq__question").click(function(){var a=$(this),b=$(".faq__answer");a.children("h4").toggleClass("js-question-active"),a.next().closest(b).toggleClass("js-answer-reveal")}),$(document).ready(function(){var a=window.location.hash.replace("#/",""),b=$("a[name*="+a+"]");a===b.attr("name")&&$("html, body").animate({scrollTop:b.offset().top},3e3)})}();var fixedheader=new fixedHeader;fixedheader.initialise();var galleryPopup=new Gallery;galleryPopup.initialise();var iosDetect=new deviceDetection;iosDetect.init();var language=new languageSelector;language.init();var loginPopup=new Popup;loginPopup.init();var accountList=new AccountList;accountList.init();var marginBanners=new MarginBanners;marginBanners.initialise();var mctabs=new matchCentreTabs;mctabs.initialise();var megamenu=new MegaMenu;megamenu.initialise();const nav=document.querySelector(".site-header"),topOfNav=nav.offsetTop;console.log(nav.offsetTop),window.addEventListener("scroll",fixNav);var mainNav=new MainNav;Modernizr.touch&&Modernizr.mq("screen and (max-width: 540px)")?mainNav.initTouch():mainNav.initDefault();var playertabs=new playerTabs;playertabs.initialise();var search=new Search;search.initialise();var stats=new animatedStats;stats.init();var SelectBoxes=function(){var a={select:$("select"),selectError:$("select.form-error")};a.select.wrap('<div class="SelectWrapper"></div>'),a.select.parent().append('<span class="SelectValue"></span>'),a.selectError.length&&a.selectError.parent().addClass("form-error"),a.select.each(function(){var a=$(this),b=a.find("option:selected").length,c=a.find("option:selected").html(),d=a.parent(),e=a.find("option:first").html();void 0!==a.attr("data-player-type")&&a.parent(".SelectWrapper").attr("data-player-type",a.attr("data-player-type")),b?d.find("span.SelectValue").html(c):d.find("span.SelectValue").html(e),$(document).on("change","select",function(){var a=$(this),b=a.find("option:selected").html();a.parent().find("span.SelectValue").html(b)})})};SelectBoxes();var carousel=new Carousel;carousel.init();var splashPopup=new Splash;splashPopup.initialise();var tabs=new tabController;tabs.init();var validate=new Validation;validate.init();var videodetect=new videoDetect;videodetect.initialise();var trackOutboundLink=function(a,b,c){ga("send","event","URL_CLICK","click",b,{transport:"beacon",hitCallback:createFunctionWithTimeout(function(){!0===c?window.open(a):document.location=a})})};!function(a,b){a.fn.drawDoughnutChart=function(b,c){function d(a,b){var c=-1.57,d=4.7131,e=u+w(c)*a,f=v+x(c)*a,g=u+w(c)*b,h=v+x(c)*b,i=u+w(d)*a,j=v+x(d)*a,k=u+w(d)*b,l=v+x(d)*b,m=["M",e,f,"A",a,a,0,1,1,i,j,"Z","M",k,l,"A",b,b,0,1,0,g,h,"Z"];return m=m.join(" ")}function e(c){var d=a(this).data().order;if(z.showTip&&L.text(b[d].title+": "+b[d].value).fadeIn(200),z.showLabel){$summaryTitle.text(b[d].title).css("font-size",q($summaryTitle,b[d].title));var e=z.shortInt?p(b[d].value):b[d].value;O.html(e).css("font-size",q(O,e))}z.onPathEnter.apply(a(this),[c,b])}function f(c){if(z.showTip&&L.hide(),z.showLabel){$summaryTitle.text(z.summaryTitle).css("font-size",q($summaryTitle,z.summaryTitle));var d=z.shortInt?p(H):H;O.html(d).css("font-size",q(O,d))}z.onPathLeave.apply(a(this),[c,b])}function g(a){z.showTip&&L.css({top:a.pageY+z.tipOffsetY,left:a.pageX-L.width()/2+z.tipOffsetX})}function h(c){var d=a(this).data().order;void 0!==b[d].action&&b[d].action()}function i(a){var c=-y/2,e=1;if(z.animation&&z.animateRotate&&(e=a),j(a,H),K.attr("opacity",a),1===b.length&&4.7122<e*(b[0].value/H*(2*y))+c)return void D[0].attr("d",d(F,G));for(var f=0,g=b.length;f<g;f++){var h=e*(b[f].value/H*(2*y)),i=c+h,k=(i-c)%(2*y)>y?1:0,l=u+w(c)*F,m=v+x(c)*F,n=u+w(c)*G,o=v+x(c)*G,p=u+w(i)*F,q=v+x(i)*F,r=u+w(i)*G,s=v+x(i)*G,t=["M",l,m,"A",F,F,0,k,1,p,q,"L",r,s,"A",G,G,0,k,0,n,o,"Z"];D[f].attr("d",t.join(" ")),c+=h}}function j(a,b){O.css({opacity:a}).text((b*a).toFixed(1));var c=z.shortInt?p(b):b;O.html("").css("font-size",q(O,c))}function k(a,b){b(z.animation?o(E(a),null,0):1)}function l(a){var b=z.animation?1/o(z.animationSteps,Number.MAX_VALUE,1):1,c=z.animation?0:1;B(function(){c+=b,k(c,a),c<=1?B(arguments.callee):z.afterDrawed.call(r)})}function m(a){return Math.min.apply(null,a)}function n(a){return!isNaN(parseFloat(a))&&isFinite(a)}function o(a,b,c){return n(b)&&a>b?b:n(c)&&a<c?c:a}function p(a){a=a.toString();var b=a.length;return b<5?a:b<8?'<span title="'+a+'">'+a.substring(0,b-3)+"K</span>":'<span title="'+a+'">'+a.substring(0,b-6)+"M</span>"}function q(a,b){a.css("font-size",""),b=b.toString().replace(/(<([^>]+)>)/gi,"");var c=a.width()/b.length*z.ratioFont;return a.width()-b.length*a.css("font-size").replace(/px/,"")/z.ratioFont<0?c+"px":""}var r=this,s=r.width(),t=r.height(),u=s/2,v=t/2,w=Math.cos,x=Math.sin,y=Math.PI,z=a.extend({segmentShowStroke:!0,segmentStrokeColor:"#ffffff",segmentStrokeWidth:4,baseColor:"rgba(0,0,0,0)",baseOffset:4,edgeOffset:10,percentageInnerCutout:70,animation:!0,animationSteps:90,animationEasing:"easeInOutExpo",animateRotate:!0,tipOffsetX:-8,tipOffsetY:-45,showTip:!1,showLabel:!1,ratioFont:1.5,shortInt:!1,tipClass:"doughnutTip",summaryClass:"doughnutSummary",summaryTitle:"",summaryTitleClass:"doughnutSummaryTitle",summaryNumberClass:"doughnutSummaryNumber",beforeDraw:function(){},afterDrawed:function(){},onPathEnter:function(a,b){},onPathLeave:function(a,b){}},c),A={linear:function(a){return a},easeInOutExpo:function(a){var b=a<.5?8*a*a*a*a:1-8*--a*a*a*a;return b>1?1:b}},B=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}();z.beforeDraw.call(r);var C=a('<svg width="'+s+'" height="'+t+'" viewBox="0 0 '+s+" "+t+'" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"></svg>').appendTo(r),D=[],E=A[z.animationEasing],F=m([t/2,s/2])-z.edgeOffset,G=F*(z.percentageInnerCutout/100),H=0,I=F+z.baseOffset,J=G-z.baseOffset;a(document.createElementNS("http://www.w3.org/2000/svg","path")).attr({d:d(I,J),fill:z.baseColor}).appendTo(C);var K=a(document.createElementNS("http://www.w3.org/2000/svg","g"));if(K.attr({opacity:0}).appendTo(C),z.showTip){var L=a('<div class="'+z.tipClass+'" />').appendTo("body").hide();L.width(),L.height()}for(var M=2*(G-(F-G)),N=a('<div class="'+z.summaryClass+'" />').appendTo(r).css({width:M+"px",height:M+"px","margin-left":-M/2+"px","margin-top":-M/2+"px"}),O=a('<p class="'+z.summaryNumberClass+'"></p>').appendTo(N).css({opacity:0}),P=0,Q=b.length;P<Q;P++)H+=b[P].value,D[P]=a(document.createElementNS("http://www.w3.org/2000/svg","path")).attr({"stroke-width":z.segmentStrokeWidth,stroke:z.segmentStrokeColor,fill:b[P].color,"data-order":P}).appendTo(K).on("mouseenter",e).on("mouseleave",f).on("mousemove",g).on("click",h);return l(i),r}}(jQuery);var matchCentreActionAreas=function(){function a(){var a=setInterval(function(){i.find("svg rect").length>0&&c()},1e3),c=function(){h=i.find("svg"),clearInterval(a),b()}}function b(){c(),d(),e(),f(),g(),setTimeout(function(){i.css("opacity",1)},200)}function c(){h.children().closest("rect").attr("class","opta-pitch")}function d(){h.children("rect").css({stroke:"#ffffff",strokeWidth:"3px"})}function e(){h.children().each(function(){var a=$(this).attr("font-size"),b=$(this).attr("stroke-width");void 0!==a&&!1!==a&&("Possession"==$(this).text()&&$(this).remove(),"24px"!=$(this).attr("font-size")&&"23px"!=$(this).attr("font-size")||$(this).remove()),void 0!==b&&!1!==b&&"0"==$(this).attr("stroke-width")&&$(this).remove()})}function f(){h.children().each(function(){var a=$(this).attr("stroke-dasharray");void 0!==a&&!1!==a&&($(this).css({stroke:"#484747",strokeOpacity:1,stokeWidth:"2px"}),$(this).attr("stroke-dasharray","10,5"))})}function g(){h.children().each(function(){var a=$(this).attr("href");void 0!==a&&!1!==a&&$(this).attr("y",130)})}var h,i=$("#OptaActionAreas");this.init=function(){i.on("DOMSubtreeModified",function(){i.css("opacity",0),i.find("svg").length>0&&(i.off("DOMSubtreeModified"),a(),$(window).resize(function(){a()}))})}},matchCentreActionAreas=new matchCentreActionAreas;matchCentreActionAreas.init();var matchCentreGoalReplay=function(){function a(){var a=setInterval(function(){f.find("svg rect").length>0&&c()},1e3),c=function(){e=f.find("svg"),clearInterval(a),b()}}function b(){c(),d()}function c(){e.children().closest("rect").attr("class","opta-pitch")}function d(){e.children("rect, circle, path").css({stroke:"#ffffff",strokeWidth:"3px"})}var e,f=$("#OptaGoalReplay");this.init=function(){f.on("DOMSubtreeModified",function(){f.find("svg").length>0&&(f.off("DOMSubtreeModified"),a(),$(window).resize(function(){a()}))})}},matchCentreGoalReplay=new matchCentreGoalReplay;matchCentreGoalReplay.init();var matchCentrePlayerHeatMap=function(){function a(){setTimeout(function(){$(".starter, .sub").click()},3e3)}var b=$(".opta-heatmap-container");this.init=function(){b.on("DOMSubtreeModified",function(){b.find(".starter").length>0&&(b.off("DOMSubtreeModified"),a())})}},matchCentrePlayerHeatMap=new matchCentrePlayerHeatMap;matchCentrePlayerHeatMap.init();var data={},matchCentreTabs=function(){var a,b,c,d=$("#OptaMatchStats"),e={};this.matchCenter={matchTeamstatsDefence:!1,matchTeamstatsAttack:!1,matchTeamstatsGeneralplay:!1,matchTeamstatsDistribution:!1},this.initialise=function(){var e=this;d.on("DOMSubtreeModified",function(){d.find(".tabs-selected").length>0&&(d.off("DOMSubtreeModified"),b=d.attr("data-home-team-color"),c=d.attr("data-away-team-color"),a=$(".tabs-nav li a"),e.checkMatchCentreTabs(),e.setSection(),e.checkProgressBarPseudo())})},this.update=function(){var a=this;for(var d in this.matchCenter){if(void 0===e)break;var f=d.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})+"-",g=a.scapeData(f);if("matchTeamstatsGeneralplay"===d&&void 0!==e[d]&&("string"==typeof e[d].home&&(e[d].home=e[d].home.replace("%","")),"string"==typeof e[d].away&&(e[d].away=e[d].away.replace("%",""))),
void 0!==e[d]&&(g.away!==e[d].away||g.home!==e[d].home)){e[d]=g;var h=[{title:"Home",value:g.home,color:b},{title:"Away",value:g.away,color:c}],i=g.away,j=g.home;"matchTeamstatsGeneralplay"===d&&(i=Number(Math.round(g.away.toFixed(1)+"e1")+"e-1")+"%",j=Number(Math.round(g.home.toFixed(1)+"e1")+"e-1")+"%");var k=$("#"+f+"chart");k.empty().parent().find(".doughnut-chart__away-total").html(i),k.empty().parent().find(".doughnut-chart__home-total").html(j),a.createChart(f+"chart",h)}}},this.checkProgressBarPseudo=function(){function a(a){a.each(function(){$(this).find("dl dd").each(function(){var a=$(this),b=a.find(".stat-home").next(),c=b.find("span:first-of-type").width();0!==Math.floor(c)&&100!==Math.floor(c)||b.addClass("fullbar")})})}for(var b in this.matchCenter){var c=b.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()});a(d.find('.tabs-content div[id^="'+c+'"]'))}},this.checkMatchCentreTabs=function(){d.find('div[id^="match-teamstats-attack-"]').length&&(this.matchCenter.matchTeamstatsAttack=!0),d.find('div[id^="match-teamstats-generalplay-"]').length&&(this.matchCenter.matchTeamstatsGeneralplay=!0),d.find('div[id^="match-teamstats-distribution-"]').length&&(this.matchCenter.matchTeamstatsDistribution=!0),d.find('div[id^="match-teamstats-defence-"]').length&&(this.matchCenter.matchTeamstatsDefence=!0)},this.setSection=function(){var a=0;for(var d in this.matchCenter){if(this.matchCenter[d]){var f=d.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})+"-",g=this.scapeData(f),h=$(".opta-chart-tabs ul"),i=f+"chart",j=[{title:"Home",value:g.home,color:b},{title:"Away",value:g.away,color:c}];e[d]=g;var k,l;g.home+g.away===100?(k=g.home+"<small>%</small>",l=g.away+"<small>%</small>"):(k=g.home,l=g.away),g.setZeroValues&&(k=0,l=0),h.prepend($("<li>",{class:"opta-chart-tabs__list-item","data-trigger":f,html:'<div id="'+i+'" class="doughnut-chart"></div>'}));var m=$("#"+i);m.after($("<span>",{class:"doughnut-chart__home-total",style:"color:"+b+" !important",html:k})),m.after($("<span>",{class:"doughnut-chart__away-total doughnut-chart__away-total--away",style:"color:"+c+" !important",html:l})),m.after($("<div>",{class:"opta-chart-tabs__list-item-title",text:g.title})),this.activeTab(m.parent()),3==a&&m.parent().trigger("click"),this.createChart(i,j)}a++}},this.activeTab=function(a){a.on("click",null,function(){$(".opta-chart-tabs ul").find("li").removeClass("is-active"),$(this).addClass("is-active"),$('a[href^="#'+$(this).attr("data-trigger")+'"]').parent().trigger("click")})},this.createChart=function(a,b){$("#"+a).drawDoughnutChart(b)},this.scapeData=function(a){var b=d.find('div[id^="'+a+'"] dl dd:first-of-type'),c=d.find('div[id^="'+a+'"] dl dt:first-of-type').text(),e={targetTab:a,title:c,away:parseFloat(b.find(".stat-away").text().replace("%","")),home:parseFloat(b.find(".stat-home").text().replace("%","")),setZeroValues:!1};return(0===e.away&&0===e.home||isNaN(e.away)&&isNaN(e.home))&&(e.away=50,e.home=50,e.setZeroValues=!0),e}};!function(){var a=new matchCentreTabs;a.initialise(),setTimeout(function(){setInterval(function(){a.update()},1e3)},5e3)}();var matchCentreScores=function(){function a(){g.find(".scoreline").each(function(a,c){var d=$(this).find("td:last-of-type .relative-holder > .expansion"),e=$(this).next("tr"),f="timeline-"+a,g={home:[],away:[]};d.remove(),d.addClass("icon-right-arrow"),d.text(""),$(this).prepend(d),e.find("td").css({display:"block"}),e.attr("id",f),e.addClass("timeline-container"),e.on("DOMSubtreeModified",function(){e.find(".home-events").length>0&&(e.off("DOMSubtreeModified"),e.find(".home-events ul li").each(function(){var a=$(this).find("img"),b={title:a.attr("title").split(":")[1],img:a.attr("src"),id:f};g.home.push(b)}),e.find(".away-events ul li").each(function(){var a=$(this).find("img"),b={title:a.attr("title").split(":")[1],img:a.attr("src"),id:f};g.away.push(b)}),b(g))})})}function b(a){for(var b=$("<div>",{class:"timeline-info",html:'<ul class="home-events"></ul><ul class="away-events"></ul>'}),c=0,d=a.home.length;c<d;c++)b.find("ul.home-events").append("<li><span>"+a.home[c].title+'</span><span class="timeline-icon"><img src="'+a.home[c].img+'"></span></li>');for(var e=0,f=a.away.length;e<f;e++)b.find("ul.away-events").append('<li><span class="timeline-icon"><img src="'+a.away[e].img+'"></span><span>'+a.away[e].title+"</span></li>");$("#"+a.home[0].id).find("td .expander").append(b)}function c(){$(".score").each(function(){var a=$(this);a.text(a.text().replace(/\s*\(.*?\)\s*/g,""))})}function d(){g.find("tr.standout, td.standout").each(function(){$(this).removeAttr("style")}),g.find(".timeline-container").not(".scoreline.timeline-container").each(function(){$(this).attr("style","background: transparent !important; padding: 0 !important;")})}function e(){g.find(".is-active").each(function(){$(this).attr("style","background: #603 !important")})}var f="Aston Villa",g=$("#OptaFixturesPlus");this.init=function(){g.on("DOMSubtreeModified",function(){g.find(".scoreline").length>0&&(g.off("DOMSubtreeModified"),h(),a(),d(),c(),e())})};var h=function(){g.find(".team-name").each(function(){var a=$(this);a.text()==f&&a.closest(".scoreline").addClass("is-active")})}},matchCentreScores=new matchCentreScores;matchCentreScores.init();var matchCentreTimeline=function(){function a(){$("."+c).each(function(){var a=$(this).attr("src");a=a.substr(a.lastIndexOf("/")+1).split(".")[0].replace(/-([a-z])/g,function(a,b){return b.toUpperCase()}),void 0!==e[a]&&$(this).attr("src",d+e[a])})}var b=$("#OptaTimeline"),c="jqtip",d="/Assets/Images/Opta/timeline_replacements/",e={yellowCard:"yellow-card.svg",doubleYellow:"2nd-yellow-card.svg",goal:"goal-icon.svg",penaltyInGameScored:"penalty.svg",iconSubstitution:"substitution.svg"};this.init=function(){b.on("DOMSubtreeModified",function(){b.find(".timeline-container").length>0&&(b.off("DOMSubtreeModified"),a())})}},timeline=new matchCentreTimeline;timeline.init();